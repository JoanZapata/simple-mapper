<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Simple-mapper by JoanZapata</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Simple-mapper</h1>
        <p>A very simple POJO mapper based on getters/setters with support for inheritance, cyclic dependencies, and hooks.</p>

        <p class="view"><a href="https://github.com/JoanZapata/simple-mapper">View the Project on GitHub <small>JoanZapata/simple-mapper</small></a></p>


        <ul>
          <li><a href="https://github.com/JoanZapata/simple-mapper/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/JoanZapata/simple-mapper/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/JoanZapata/simple-mapper">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="simple-mapper" class="anchor" href="#simple-mapper"><span class="octicon octicon-link"></span></a>Simple Mapper</h1>

<blockquote>
<p>I created this library because I'm tired of big xml-based or annotation-based mapping frameworks when all I need is a <strong>very basic mapping</strong> between business objects and lightweight DTOs with a similar structure.</p>
</blockquote>

<p><strong>Simple Mapper</strong> is a java objects mapper meant to be very easy-to-use and intuitive. It looks for setters in the destination object and try to find the corresponding getter in the source object. It manages <code>cyclic dependencies</code>, <code>inheritance</code>, and <code>hooks</code>.</p>

<h1>
<a name="get-it" class="anchor" href="#get-it"><span class="octicon octicon-link"></span></a>Get it</h1>

<p>Simple Mapper is <strong>available in <a href="http://search.maven.org/remotecontent?filepath=com/joanzapata/mapper/simple-mapper/1.0.8/simple-mapper-1.0.8.jar">Maven Central</a></strong>:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.joanzapata.mapper<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>simple-mapper<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0.8<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h1>
<a name="basics" class="anchor" href="#basics"><span class="octicon octicon-link"></span></a>Basics</h1>

<p>You do all the mapping with the <code>Mapper</code> object and its <code>map()</code> method.</p>

<div class="highlight highlight-java"><pre><span class="c1">// First, create a ```Mapper``` object.</span>
<span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mapper</span><span class="o">();</span>

<span class="c1">// Map a plain old java object with map()</span>
<span class="n">BookDTO</span> <span class="n">bookDTO</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">book</span><span class="o">,</span> <span class="n">BookDTO</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

<span class="c1">// Mapper will detect lists and maps so you can do things like:</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">BookDTO</span><span class="o">&gt;</span> <span class="n">bookListDTO</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">bookList</span><span class="o">,</span> <span class="n">BookDTO</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">BookDTO</span><span class="o">&gt;</span> <span class="n">bookListDTO</span> <span class="o">=</span> <span class="n">mapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">bookMap</span><span class="o">,</span> <span class="n">Long</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">BookDTO</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>

<h1>
<a name="inheritance" class="anchor" href="#inheritance"><span class="octicon octicon-link"></span></a>Inheritance</h1>

<p>If you need support for inheritance, you must provide the mappings of the subclasses:</p>

<p><img src="https://raw.github.com/JoanZapata/simple-mapper/master/inheritance.png" alt="Alt"></p>

<pre><code>Mapper mapper = new Mapper()
    .mapping(B.class, B'.class)
    .mapping(C.class, C'.class);
</code></pre>

<ul>
<li>You can register mapping in both directions by using the <code>biMapping</code> method.</li>
</ul><h1>
<a name="name-binding" class="anchor" href="#name-binding"><span class="octicon octicon-link"></span></a>Name binding</h1>

<p>The mapper supports name variations, that means for example that <code>public Book getBook()</code> in the source object is considered as a valid candidate for <code>public void setBookDTO(BookDTO bookDTO)</code> in the destination object. The library currently manage <code>DTO</code> and <code>BO</code> name variations.</p>

<h1>
<a name="hooks" class="anchor" href="#hooks"><span class="octicon octicon-link"></span></a>Hooks</h1>

<p>If you need custom mapping or additional operations after some mappings, you can provide hooks:</p>

<div class="highlight highlight-java"><pre><span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mapper</span><span class="o">()</span>
    <span class="o">.</span><span class="na">hook</span><span class="o">(</span><span class="k">new</span> <span class="n">Hook</span><span class="o">&lt;</span><span class="n">BookEntry</span><span class="o">,</span> <span class="n">BookEntryDTO</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">extraMapping</span><span class="o">(</span><span class="n">BookEntry</span> <span class="n">source</span><span class="o">,</span> <span class="n">BookEntryDTO</span> <span class="n">destination</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Do additional operations in the destination object</span>
        <span class="o">}</span>
    <span class="o">};</span>
<span class="o">});</span>
</pre></div>

<ul>
<li>Hooks are called <strong>after</strong> the object has been fully mapped.</li>
<li>Hooks are guaranteed to be called in the <strong>order</strong> you added them to the mapper. </li>
</ul><h1>
<a name="custom-mapping" class="anchor" href="#custom-mapping"><span class="octicon octicon-link"></span></a>Custom Mapping</h1>

<p>If you need to totally handle the mapping of certain types, you can provide custom mappers:</p>

<div class="highlight highlight-java"><pre><span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mapper</span><span class="o">()</span>
    <span class="o">.</span><span class="na">customMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomMapper</span><span class="o">&lt;</span><span class="n">PhoneEntry</span><span class="o">,</span> <span class="n">PhoneEntryDTO</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">PhoneEntryDTO</span> <span class="nf">map</span><span class="o">(</span><span class="n">PhoneEntry</span> <span class="n">source</span><span class="o">,</span> <span class="n">MappingContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Here you can create a PhoneEntryDTO by yourself and return it.</span>
            <span class="n">PhoneEntryDTO</span> <span class="n">phoneEntryDTO</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PhoneEntryDTO</span><span class="o">();</span>
            <span class="n">phoneEntryDTO</span><span class="o">.</span><span class="na">setNumber</span><span class="o">(</span><span class="n">source</span><span class="o">.</span><span class="na">getNumber</span><span class="o">());</span>
            <span class="n">phoneEntryDTO</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">source</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
            <span class="k">return</span> <span class="n">phoneEntryDTO</span><span class="o">;</span>

            <span class="c1">// You can also delegate it to another mapper, in this case don't</span>
            <span class="c1">// forget to pass the mapping context along with the source:</span>
            <span class="k">return</span> <span class="n">phoneEntryMapper</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">source</span><span class="o">,</span> <span class="n">PhoneEntryDTO</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">context</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">};</span>
<span class="o">});</span>
</pre></div>

<p>If you need to provide a custom mapping both ways, you can use a CustomBiMapper:</p>

<div class="highlight highlight-java"><pre><span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mapper</span><span class="o">()</span>
    <span class="o">.</span><span class="na">customBiMapper</span><span class="o">(</span><span class="k">new</span> <span class="n">CustomBiMapper</span><span class="o">&lt;</span><span class="n">PhoneEntry</span><span class="o">,</span> <span class="n">PhoneEntryDTO</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">PhoneEntryDTO</span> <span class="nf">mapForward</span><span class="o">(</span><span class="n">PhoneEntry</span> <span class="n">source</span><span class="o">,</span> <span class="n">MappingContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Mapping</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">PhoneEntry</span> <span class="nf">mapBackward</span><span class="o">(</span><span class="n">PhoneEntryDTO</span> <span class="n">source</span><span class="o">,</span> <span class="n">MappingContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Mapping</span>
        <span class="o">}</span>
    <span class="o">};</span>
<span class="o">});</span>
</pre></div>

<h1>
<a name="strict-mode" class="anchor" href="#strict-mode"><span class="octicon octicon-link"></span></a>Strict Mode</h1>

<p>The simple-mapper is very permissive by default. If something wrong happens mapping a property, it gives up and goes to the next property to map. You can override this behavior by setting the <code>StrictMode</code>. In this mode, the <code>map()</code> function will raise a <code>StrictModeException</code> if something goes wrong:</p>

<ul>
<li>No getter found that matches a setter in the destination object.</li>
<li>Types mismatch between getter and setter.</li>
<li>Destination object doesn't have an empty constructor.</li>
<li>Any other bad thing happens during the mapping.</li>
</ul><div class="highlight highlight-java"><pre><span class="n">Mapper</span> <span class="n">mapper</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Mapper</span><span class="o">().</span><span class="na">strictMode</span><span class="o">();</span>
</pre></div>

<h1>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h1>

<pre><code>Copyright 2013 Joan Zapata

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/JoanZapata">JoanZapata</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-41258927-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>